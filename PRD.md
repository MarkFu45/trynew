# 产品需求文档（PRD）——朋友圈分析与交友建议 H5

版本：v0.1（草案）  
最后更新：2026-01-11

## 1. 背景与愿景
- 背景：用户上传 5 张及以上某人的朋友圈截图，调用豆包大模型（`doubao-seed-1.6-thinking`）进行分析，输出“更容易与对方成为朋友/进一步发展为男女朋友”的行动建议。
- 愿景：用合规、尊重、温柔的方式，帮助用户更好理解对方，提供低风险、可执行的互动方案，提升关系质量，而不是“强推”或越界。

提示说明：本产品仅提供建议，不保证关系结果；建议在法律与平台规则允许范围内使用，避免骚扰与侵犯隐私。

## 2. 目标与不做的事
- 主要目标：
  - 从朋友圈内容中提炼对方的个性画像、偏好、生活方式和社交风格。
  - 生成友好互动策略（如开场话术、话题引导、礼物建议、线下活动建议）。
  - 给出风险提示（禁忌话题、不宜频率、礼貌边界）。
  - 输出 7～14 天的渐进式行动计划。

- 非目标/不做的事：
  - 不承诺形成情侣关系或“必胜方案”。
  - 不进行人身攻击、跟踪行为、过度窥私、或诱导违规。
  - 不提供对具体个人的敏感信息推断（如政治立场、医疗隐私等）。

## 3. 用户与场景
- 用户画像：
  - 年龄：16+（建议面向成年人；未成年人需在家长指导下仅进行“交友建议”，不涉及恋爱鼓动）。
  - 技术背景：零编程基础，手机端为主。
  - 需求：更了解对方，降低尴尬，更自然地接近。

- 场景：
  - 表白前的自我评估与准备。
  - 想提升聊天质量、减少冷场。
  - 想送礼物但拿不准喜好。
  - 准备线下见面前的风险预判与注意事项。

## 4. 关键指标（Success Metrics）
- 分析完成率 ≥ 95%（在网络正常下）。
- 报告生成时长 ≤ 60 秒（5～15 张图）。
- 用户满意度（点赞或“分析有帮助”反馈）≥ 80%。
- 建议采纳率（用户点击复制话术/计划步骤）≥ 60%。
- 负面反馈率（骚扰或越界投诉）≤ 1%。

## 5. 功能需求（MVP）
UI：仅一个页面——上传页；分析结果在同页展示，无单独报告页。
### 5.1 上传与预处理
- 支持上传 5～30 张朋友圈截图，支持拖拽与选择相册。
- 校验：数量、文件大小（单张 ≤ 10MB）、格式（jpg/png/webp）。
- 本地压缩与 EXIF 清理（防止隐私泄露）。
- OCR 文本提取（可选：调用火山引擎 OCR 或前端离线 OCR 方案）。
- 基础内容分类：时间、地点（若图片含地理标记文本）、主题词。

### 5.2 模型分析
- 调用豆包大模型 `doubao-seed-1.6-thinking`：
  - 输入：OCR 文本 + 图片“推测性标签”（如美食、运动、旅行等）+ 用户备注（可选）。
  - 输出：结构化 JSON + 人类可读报告。
- 人物画像：
  - 兴趣偏好（Top 5，置信度）。
  - 社交风格（外向/内向、幽默/严肃、理性/感性等倾向）。
  - 作息与节奏（活跃时段、发帖频率推断）。
  - 内容敏感区（谨慎话题提醒）。
- 交友建议：
  - 开场话术模板（多组，语气不同）。
  - 聊天话题建议（按兴趣分类）。
  - 礼物/活动建议（含预算区间与风险提示）。
  - 7～14 天行动计划（分日或分阶段）。
- 风险与边界：
  - 不宜做的事列表（例如：过度追问隐私、强加价值观等）。
  - 触发“拒绝信号”的识别与应对（如长时间不回复）。

### 5.3 上传页内结果展示（唯一页面）
- 上传页即展示分析结果，无独立报告页：
  - 进度与状态提示（上传 → 预处理 → 分析）。
  - 人物画像卡片（兴趣标签云/简要要点）。
  - 推荐话术一键复制（提供多风格简短话术）。
  - 渐进式行动建议（简洁步骤，不使用复杂时间轴）。
  - 风险提醒模块（醒目但不恐吓，强调尊重与边界）。

### 5.4 合规与隐私
- 明确用户对上传内容负责任；不鼓励未经同意传播或公开他人隐私。
- 不保存原始图片（默认仅在本地内存或短时缓存）；
  - 若需云端分析，提供“同意上传到服务器处理”的显式勾选。
- 一键清除数据与缓存。
- 免责声明与使用条款（禁止骚扰、跟踪、违法用途）。

## 6. 拓展功能（V1/V2）
- V1：
  - 轻量聊天教练：根据用户的聊天记录（脱敏）动态建议下一句。
  - A/B 话术对比实验：用户选择风格后给双方案。
  - 多语言支持（简体中文/英文）。
- V2：
  - 线下活动安排助手（日程、地点建议、预算对比）。
  - 与社交平台日程/备忘录集成（仅用户侧授权）。

## 7. 用户流程（UML 简版）
1) 进入 H5 → 2) 上传截图（校验通过） → 3) 勾选隐私与合规说明 → 4) 预处理（压缩/OCR） → 5) 生成分析输入 → 6) 调用模型 → 7) 展示报告与建议 → 8) 复制话术/保存计划 → 9) 可选导出/清除数据。

## 8. 技术方案与架构
- 前端：H5（Vue/React 任一），移动端优先，自适配主流浏览器。
- 后端（若需要服务端处理）：Node.js/Express 或 Serverless（如火山引擎函数计算）。
- 模型调用：
  - 豆包 `doubao-seed-1.6-thinking`（文档：https://www.volcengine.com/docs/82379/1399008）。
  - 推荐通过后端安全代理调用，避免在前端暴露密钥。
- OCR：火山引擎 OCR 或开源 OCR（如 Tesseract.js）+ 业务词典增强。
- 数据存储：默认不持久化图片；仅保存分析结果 JSON（可选，本地 `IndexedDB`）。

### 8.1 API 设计（示例）
- `POST /api/analyze`
  - 请求体：`form-data`（files: images[5..30]），可选 `notes`（string）。
  - 返回体（JSON）：
    ```json
    {
      "persona": {
        "traits": ["理性", "爱运动"],
        "interests": [{"tag": "跑步", "confidence": 0.82}],
        "style": {"social": "偏内向", "humor": "中等"}
      },
      "plan": {
        "days": 10,
        "steps": [
          {"day": 1, "message": "轻松问候+共同点话题"}
        ]
      },
      "talks": [{"tone": "自然", "text": "嗨，前几天看到你发的..."}],
      "risks": ["避免过度询问隐私"],
      "meta": {"cost_ms": 3500}
    }
    ```

### 8.2 模型 Prompt 草案
- 系统指令（示例）：
  - “你是一个追求异性的高手，对于青春男女生的心理和外在表现，有非常强的洞察，也有一套很厉害的追求异性的技巧！擅长于输出简短但有效的分析和建议。”
  - 合规附加指令：“在给出建议时必须尊重与合规，不鼓励骚扰或越界行为，避免敏感隐私推断与不当引导。”
- 用户指令组装：
  - 输入：OCR 文本段落 + 图片标签 + 用户备注（如“我也是跑步爱好者”）。
  - 输出要求：
    - 结构化 JSON（字段：persona、plan、talks、risks、citations），
    - 和易读的中文报告（分区块，便于 H5 展示）。

## 9. 合规、伦理与安全
- 尊重：建议避免敏感话题；提醒礼貌与尊重边界。
- 隐私：默认不在云端长期保存图片；用户可选择“仅本地处理”。
- 透明：在上传前明确告知用途与处理方式。
- 退出机制：一键删除与清除缓存；提供“停用建议模式”。
- 监控：记录异常比例（如识别失败、模型拒绝率），用于迭代优化。

## 10. 交互与文案（示例）
- 上传页（唯一页面）：
  - 标题：“更懂 TA 的朋友圈分析（尊重与合规）”。
  - 小字：仅作建议，别用来窥私或施压。
  - 结果区块标题：“兴趣画像”“聊天建议”“行动建议”“风险提醒”。
  - 一键复制按钮：“复制这句开场话”。
- 同意弹窗：
  - “为生成建议，系统需分析你上传的截图内容。如不同意，可选择本地处理或退出。”

## 11. 非功能需求
- 性能：多数分析 ≤ 60 秒，超时给用户友好提示。
- 兼容：iOS Safari、Android Chrome 主流版本。
- 可用性：清晰步骤与反馈；错误时给恢复建议（重试、减少图片体积）。
- 易用性：新手友好，术语少，解释通俗。
- 可观测性：后端记录调用耗时、错误码、拒绝率（不含隐私内容）。

## 12. 测试与验收
- 功能测试：
  - 上传边界：4 张（拒绝）、5 张（通过）、30 张（通过）、31 张（拒绝）。
  - 大图压缩：100 张不同尺寸文件抽样测试。
  - OCR 准确率：样本集（美食、运动、旅行、读书）。
  - 模型输出结构：JSON 字段完整且类型正确。
- 验收标准：
  - 交互流程顺畅，无阻塞；
  - 报告内容清晰、无明显事实错误；
  - 风险与边界提示到位。

## 13. 里程碑计划
- M0（1 周）：MVP 原型——上传、OCR、模型分析、上传页内结果展示。
- M1（2 周）：建议可复制、行动计划时间轴、导出功能。
- M2（2～4 周）：聊天教练、A/B 话术、国际化与性能优化。

## 14. 风险与应对
- 图片质量差 → 引导用户提供更清晰截图，开启对比增强。
- OCR 误识别 → 增强词典与规则、人工纠错入口（可选）。
- 模型误判/过度推断 → 明确置信度与来源，保守输出。
- 合规风险 → 强化告知与同意流程、默认本地处理、数据最小化。

## 15. 备注
- 模型与 OCR 服务的费用需在运营期评估与控制（缓存与批量优化）。
- 建议先做“对方画像+建议”作为核心，后续再做“聊天教练”。
